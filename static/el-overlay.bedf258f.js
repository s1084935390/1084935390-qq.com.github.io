import{G as de,o as te,H as ue,b as ce,I as fe,s as X,x as me,N as V,d as q,l as R,J as g,K as pe,D as J,E as U,c as I,e as W,f as z,n as h,y as o,t as ve,w as M,L as x,M as ye,g as G,h as Ee,O as Ce,r as D,P as be,C as ge,Q as he,F as Te,m as Se,R as we,S as ke,U as Me,V as De}from"./index.b46490af.js";import{i as F,b as P,d as K,u as se,_ as ne,a as Ae,c as Le,e as Ie,f as Z,w as Be}from"./auth.342ef958.js";import{a as j,t as Ne,h as Q,g as ee,b as Oe,r as Re,i as Ye,E as $e,C as _e,U as le,u as ze,c as oe}from"./request.197b9c77.js";import{u as He,F as Ue,E as Ve}from"./focus-trap.8e77ed96.js";import{u as We}from"./index.280d97dd.js";let _;const Xe=()=>{var e;if(!F)return 0;if(_!==void 0)return _;const t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const r=l.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),_=s-r,_},xe=(...e)=>t=>{e.forEach(s=>{de(s)?s(t):s.value=t})};var H=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(H||{});const ae=Symbol("dialogInjectionKey"),Ge=(e,t,s)=>{let l={offsetX:0,offsetY:0};const r=i=>{const u=i.clientX,y=i.clientY,{offsetX:m,offsetY:p}=l,n=e.value.getBoundingClientRect(),f=n.left,T=n.top,B=n.width,N=n.height,A=document.documentElement.clientWidth,O=document.documentElement.clientHeight,L=-f+m,S=-T+p,w=A-f-B+m,E=O-T-N+p,k=v=>{const C=Math.min(Math.max(m+v.clientX-u,L),w),Y=Math.min(Math.max(p+v.clientY-y,S),E);l={offsetX:C,offsetY:Y},e.value.style.transform=`translate(${j(C)}, ${j(Y)})`},a=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",a)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},d=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};te(()=>{ue(()=>{s.value?c():d()})}),ce(()=>{d()})},Ke=e=>{if(fe(e)||Ne("[useLockscreen]","You need to pass a ref param to this function"),!F||Q(document.body,"el-popup-parent--hidden"))return;let t=0,s=!1,l="0",r=0;const c=()=>{Re(document.body,"el-popup-parent--hidden"),s&&(document.body.style.paddingRight=l)};X(e,d=>{if(!d){c();return}s=!Q(document.body,"el-popup-parent--hidden"),s&&(l=document.body.style.paddingRight,r=Number.parseInt(ee(document.body,"paddingRight"),10)),t=Xe();const i=document.documentElement.clientHeight<document.body.scrollHeight,u=ee(document.body,"overflowY");t>0&&(i||u==="scroll")&&s&&(document.body.style.paddingRight=`${r+t}px`),Oe(document.body,"el-popup-parent--hidden")}),me(()=>c())},ie=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let t=!1,s=!1;return{onClick:d=>{t&&s&&e(d),t=s=!1},onMousedown:d=>{t=d.target===d.currentTarget},onMouseup:d=>{s=d.target===d.currentTarget}}},je=P({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:K([String,Array,Object])},zIndex:{type:K([String,Number])}}),qe={click:e=>e instanceof MouseEvent};var Fe=q({name:"ElOverlay",props:je,emits:qe,setup(e,{slots:t,emit:s}){const l=se("overlay"),r=u=>{s("click",u)},{onClick:c,onMousedown:d,onMouseup:i}=ie(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:d,onMouseup:i},[g(t,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(t,"default")])}});const Pe=Fe,re=P({center:{type:Boolean,default:!1},closeIcon:{type:Ye,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Je={close:()=>!0},Ze=["aria-label"],Qe=["id"],eo={name:"ElDialogContent"},oo=q({...eo,props:re,emits:Je,setup(e){const t=e,{t:s}=He(),{Close:l}=_e,{dialogRef:r,headerRef:c,bodyId:d,ns:i,style:u}=J(ae),{focusTrapRef:y}=J(Ue),m=xe(y,r),p=U(()=>t.draggable);return Ge(r,c,p),(n,f)=>(I(),W("div",{ref:o(m),class:h([o(i).b(),o(i).is("fullscreen",n.fullscreen),o(i).is("draggable",o(p)),{[o(i).m("center")]:n.center},n.customClass]),style:Ee(o(u)),tabindex:"-1",onClick:f[1]||(f[1]=Ce(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:h(o(i).e("header"))},[g(n.$slots,"header",{},()=>[z("span",{role:"heading",class:h(o(i).e("title"))},ve(n.title),3)]),n.showClose?(I(),W("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:h(o(i).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=T=>n.$emit("close"))},[R(o($e),{class:h(o(i).e("close"))},{default:M(()=>[(I(),x(ye(n.closeIcon||o(l))))]),_:1},8,["class"])],10,Ze)):G("v-if",!0)],2),z("div",{id:o(d),class:h(o(i).e("body"))},[g(n.$slots,"default")],10,Qe),n.$slots.footer?(I(),W("footer",{key:0,class:h(o(i).e("footer"))},[g(n.$slots,"footer")],2)):G("v-if",!0)],6))}});var to=ne(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const so=P({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:K(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:e=>Ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(e,t)=>{const l=ge().emit,{nextZIndex:r}=ze();let c="";const d=oe(),i=oe(),u=D(!1),y=D(!1),m=D(!1),p=D(e.zIndex||r());let n,f;const T=Le("namespace",Ie),B=U(()=>{const b={},$=`--${T.value}-dialog`;return e.fullscreen||(e.top&&(b[`${$}-margin-top`]=e.top),e.width&&(b[`${$}-width`]=j(e.width))),b});function N(){l("opened")}function A(){l("closed"),l(le,!1),e.destroyOnClose&&(m.value=!1)}function O(){l("close")}function L(){f==null||f(),n==null||n(),e.openDelay&&e.openDelay>0?{stop:n}=Z(()=>k(),e.openDelay):k()}function S(){n==null||n(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=Z(()=>a(),e.closeDelay):a()}function w(){function b($){$||(y.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(b):S()}function E(){e.closeOnClickModal&&w()}function k(){!F||(u.value=!0)}function a(){u.value=!1}function v(){l("openAutoFocus")}function C(){l("closeAutoFocus")}e.lockScroll&&Ke(u);function Y(){e.closeOnPressEscape&&w()}return X(()=>e.modelValue,b=>{b?(y.value=!1,L(),m.value=!0,l("open"),p.value=e.zIndex?p.value++:r(),be(()=>{t.value&&(t.value.scrollTop=0)})):u.value&&S()}),X(()=>e.fullscreen,b=>{!t.value||(b?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),te(()=>{e.modelValue&&(u.value=!0,m.value=!0,L())}),{afterEnter:N,afterLeave:A,beforeLeave:O,handleClose:w,onModalClick:E,close:S,doClose:a,onOpenAutoFocus:v,onCloseAutoFocus:C,onCloseRequested:Y,titleId:d,bodyId:i,closed:y,style:B,rendered:m,visible:u,zIndex:p}},ao=["aria-label","aria-labelledby","aria-describedby"],io={name:"ElDialog"},ro=q({...io,props:so,emits:no,setup(e,{expose:t}){const s=e,l=he();We({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},U(()=>!!l.title));const r=se("dialog"),c=D(),d=D(),i=D(),{visible:u,titleId:y,bodyId:m,style:p,rendered:n,zIndex:f,afterEnter:T,afterLeave:B,beforeLeave:N,handleClose:A,onModalClick:O,onOpenAutoFocus:L,onCloseAutoFocus:S,onCloseRequested:w}=lo(s,c);Te(ae,{dialogRef:c,headerRef:d,bodyId:m,ns:r,rendered:n,style:p});const E=ie(O),k=U(()=>s.draggable&&!s.fullscreen);return t({visible:u,dialogContentRef:i}),(a,v)=>(I(),x(De,{to:"body",disabled:!a.appendToBody},[R(Me,{name:"dialog-fade",onAfterEnter:o(T),onAfterLeave:o(B),onBeforeLeave:o(N),persisted:""},{default:M(()=>[Se(R(o(Pe),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(f)},{default:M(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(y),"aria-describedby":o(m),class:h(`${o(r).namespace.value}-overlay-dialog`),onClick:v[0]||(v[0]=(...C)=>o(E).onClick&&o(E).onClick(...C)),onMousedown:v[1]||(v[1]=(...C)=>o(E).onMousedown&&o(E).onMousedown(...C)),onMouseup:v[2]||(v[2]=(...C)=>o(E).onMouseup&&o(E).onMouseup(...C))},[R(o(Ve),{loop:"",trapped:o(u),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(S),onReleaseRequested:o(w)},{default:M(()=>[o(n)?(I(),x(to,{key:0,ref_key:"dialogContentRef",ref:i,"custom-class":a.customClass,center:a.center,"close-icon":a.closeIcon,draggable:o(k),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,onClose:o(A)},ke({header:M(()=>[a.$slots.title?g(a.$slots,"title",{key:1}):g(a.$slots,"header",{key:0,close:o(A),titleId:o(y),titleClass:o(r).e("title")})]),default:M(()=>[g(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:M(()=>[g(a.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,ao)]),_:3},8,["mask","overlay-class","z-index"]),[[we,o(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var uo=ne(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=Be(uo);export{yo as E};
