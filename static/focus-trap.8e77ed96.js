import{c as j,B as V,i as N,_ as q}from"./auth.342ef958.js";import{E as K,y as p,I as G,r as R,o as U,b as B,d as z,F as Q,s as b,P as D,W as X,J as Z}from"./index.b46490af.js";import{d as J,e as ee}from"./request.197b9c77.js";var te={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ne=e=>(n,o)=>oe(n,o,p(e)),oe=(e,n,o)=>V(o,e,e).replace(/\{(\w+)\}/g,(a,r)=>{var c;return`${(c=n==null?void 0:n[r])!=null?c:`{${r}}`}`}),ae=e=>{const n=K(()=>p(e).name),o=G(e)?e:R(e);return{lang:n,locale:o,t:ne(e)}},Te=()=>{const e=j("locale");return ae(K(()=>e.value||te))};let f=[];const se=e=>{const n=o=>{const a=o;a.key===J.esc&&f.forEach(r=>r(a))};U(()=>{f.length===0&&document.addEventListener("keydown",n),N&&f.push(e)}),B(()=>{f=f.filter(o=>o!==e),f.length===0&&N&&document.removeEventListener("keydown",n)})},H=e=>{const n=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0||a===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)n.push(o.currentNode);return n},O=(e,n)=>{for(const o of e)if(!re(o,n))return o},re=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},ce=e=>{const n=H(e),o=O(n,e),a=O(n.reverse(),e);return[o,a]},ie=e=>e instanceof HTMLInputElement&&"select"in e,d=(e,n)=>{if(e&&e.focus){const o=document.activeElement;e.focus({preventScroll:!0}),e!==o&&ie(e)&&n&&e.select()}};function P(e,n){const o=[...e],a=e.indexOf(n);return a!==-1&&o.splice(a,1),o}const ue=()=>{let e=[];return{push:a=>{const r=e[0];r&&a!==r&&r.pause(),e=P(e,a),e.unshift(a)},remove:a=>{var r,c;e=P(e,a),(c=(r=e[0])==null?void 0:r.resume)==null||c.call(r)}}},le=(e,n=!1)=>{const o=document.activeElement;for(const a of e)if(d(a,n),document.activeElement!==o)return},A=ue(),y="focus-trap.focus-after-trapped",F="focus-trap.focus-after-released",x={cancelable:!0,bubbles:!1},I="focusAfterTrapped",M="focusAfterReleased",de=Symbol("elFocusTrap"),fe=z({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[I,M,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const o=R();let a,r;se(t=>{e.trapped&&!c.paused&&n("release-requested",t)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},m=t=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:s,altKey:i,ctrlKey:u,metaKey:l,currentTarget:W,shiftKey:w}=t,{loop:L}=e,Y=s===J.tab&&!i&&!u&&!l,v=document.activeElement;if(Y&&v){const h=W,[T,g]=ce(h);T&&g?!w&&v===g?(t.preventDefault(),L&&d(T,!0),n("focusout-prevented")):w&&[T,h].includes(v)&&(t.preventDefault(),L&&d(g,!0),n("focusout-prevented")):v===h&&(t.preventDefault(),n("focusout-prevented"))}};Q(de,{focusTrapRef:o,onKeydown:m}),b(()=>e.focusTrapEl,t=>{t&&(o.value=t)},{immediate:!0}),b([o],([t],[s])=>{t&&(t.addEventListener("keydown",m),t.addEventListener("focusin",S),t.addEventListener("focusout",C)),s&&(s.removeEventListener("keydown",m),s.removeEventListener("focusin",S),s.removeEventListener("focusout",C))});const E=t=>{n(I,t)},$=t=>n(M,t),S=t=>{const s=p(o);if(!s)return;const i=t.target,u=i&&s.contains(i);u&&n("focusin",t),!c.paused&&e.trapped&&(u?r=i:d(r,!0))},C=t=>{const s=p(o);if(!(c.paused||!s))if(e.trapped){const i=t.relatedTarget;!ee(i)&&!s.contains(i)&&setTimeout(()=>{!c.paused&&e.trapped&&d(r,!0)},0)}else{const i=t.target;i&&s.contains(i)||n("focusout",t)}};async function _(){await D();const t=p(o);if(t){A.push(c);const s=document.activeElement;if(a=s,!t.contains(s)){const u=new Event(y,x);t.addEventListener(y,E),t.dispatchEvent(u),u.defaultPrevented||D(()=>{let l=e.focusStartEl;X(l)||(d(l),document.activeElement!==l&&(l="first")),l==="first"&&le(H(t),!0),(document.activeElement===s||l==="container")&&d(t)})}}}function k(){const t=p(o);if(t){t.removeEventListener(y,E);const s=new Event(F,x);t.addEventListener(F,$),t.dispatchEvent(s),s.defaultPrevented||d(a!=null?a:document.body,!0),t.removeEventListener(F,E),A.remove(c)}}return U(()=>{e.trapped&&_(),b(()=>e.trapped,t=>{t?_():k()})}),B(()=>{e.trapped&&k()}),{onKeydown:m}}});function pe(e,n,o,a,r,c){return Z(e.$slots,"default",{handleKeydown:e.onKeydown})}var ge=q(fe,[["render",pe],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{ge as E,de as F,Te as u};
